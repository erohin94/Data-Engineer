**Amazon S3 (Simple Storage Service — Простая служба хранения)** — это облачное хранилище объектов от Amazon Web Services (AWS), предназначенное для хранения и извлечения любых объемов данных в любое время и из любого места.

В котором данные организуются не в привычные файлы и папки, а в объекты с уникальными идентификаторами и метаданными, размещённые в "бакетах" (buckets). Эта модель позволила хранить любые данные — от текстовых документов до резервных копий баз данных и мультимедийного контента.

## Примеры S3-совместимых хранилищ

**MinIO** – OpenSource-решение для частных облаков.

**Ceph (RGW)** – Распределённое хранилище с S3-совместимым API.

**Backblaze B2** – Облачное хранилище с S3-совместимостью.

**Google Cloud Storage** – Поддерживает S3-совместимый режим (Interoperability Mode).

**Azure Blob Storage** – Частично совместим через REST API.

*Amazon S3 — торговая марка AWS, поэтому другие провайдеры используют термины вроде "S3-совместимый" или "S3 API", но не могут называть свой продукт просто "S3".*

*В разговорной речи "S3" иногда используют для обозначения любого объектного хранилища с аналогичным интерфейсом.*


**Структура хранения данных в Amazon S3** отличается от привычных файловых систем. 

Чтобы понять, как устроено хранение в S3, представьте, что это огромное облачное хранилище, где нет привычных папок и жёстких дисков. 

Вместо этого используется объектная модель хранения данных, которая обеспечивает гибкость, масштабируемость и простоту. 

S3 концептуально — это очень простое key-based хранилище. Это означит, что когда ты размещаешь данные, им присваивается уникальный ключ объекта, который дальше может быть использован, чтобы эти файлы получить.Давайте разберёмся в деталях.

**1. Бакеты (Buckets)**

**Бакет** — это контейнер для хранения объектов. Бакет - ведро). Можно представить бакет как папку верхнего уровня, в которую вы загружаете свои файлы. Однако в отличие от обычных папок на компьютере, бакет — это самостоятельная единица в облаке. У каждого бакета уникальное имя в пределах всей S3.

Еще раз,  тут очень важно: Название `bucket` должно быть уникально по всей системе  S3, потому как является идентификатором для доступа к объектам `bucket'а` извне.

**Примеры бакетов:**

- `my-website-assets` — для хранения изображений и стилей сайта.

- `company-backups` — для резервных копий базы данных.

В одном аккаунте можно создавать несколько бакетов для разных целей.

**2. Объекты (Objects)**

**Объект** — это единица хранения в S3. Каждый объект состоит из трёх частей:

- Данные — непосредственно содержимое файла (например, картинка, документ или видео).

- Ключ (Key) — уникальное имя объекта в бакете, которое заменяет путь к файлу. Например, images/photo.jpg или docs/report.pdf.

- Метаданные (Metadata) — служебная информация об объекте: размер файла, тип содержимого (MIME type), дата загрузки и пользовательские метаданные.

**Пример объекта:**

Данные: файл `photo.jpg` размером 2 МБ.

Ключ: `images/2024/photo.jpg`.

Метаданные: тип содержимого `image/jpeg`, дата загрузки `2024-01-16`.

Важно понимать, что в S3 нет настоящих папок. Ключ объекта может выглядеть как путь `(images/2024/photo.jpg)`, но на самом деле это просто строка. S3 сам не создаёт папки, он просто интерпретирует символ `/` как разделитель в ключе.

**3. Версионирование (Versioning)**

S3 поддерживает версионирование объектов. Это значит, что при включённой опции старые версии объектов не удаляются, а сохраняются вместе с новыми. У каждого объекта появляется уникальный `Version ID`, который позволяет восстановить или удалить конкретную версию файла.

**Пример:**

Загружаете файл `report.pdf` → получает `Version ID: v1`.

Загружаете новый файл с тем же именем → создаётся `Version ID: v2`.

Можно восстановить или удалить любую версию.

**4. Классы хранения (Storage Classes)**

S3 предлагает разные классы хранения, которые оптимизируют стоимость и доступность данных. Это помогает хранить данные экономно в зависимости от того, как часто вы к ним обращаетесь.

`S3 Standard` — для часто используемых данных (файлы сайтов, активные проекты).

`S3 Intelligent-Tiering` — автоматически перемещает данные между уровнями в зависимости от активности.

`S3 Standard-IA (Infrequent Access)` — для данных, к которым редко обращаются, но которые нужно быстро получить (архивы, резервные копии).

`S3 Glacier` — для долговременного хранения, когда доступ к данным требуется редко (архивы, логи).

`S3 Glacier Deep Archive` — для архивов, которые почти не используются (исторические данные).

**5. Доступ и безопасность**

S3 предлагает гибкую систему управления доступом к данным:

`ACL (Access Control List)` — управляет правами доступа на уровне объектов и бакетов.

`IAM-политики` — задают права для пользователей и сервисов AWS.

`Bucket Policy` — правила доступа ко всему бакету.

`Presigned URLs` — временные ссылки для ограниченного доступа к объектам.

**6. Шифрование данных**

Данные в S3 могут быть зашифрованы как при хранении, так и при передаче. Есть несколько способов шифрования:

`SSE-S3` — шифрование с помощью ключей, управляемых AWS.

`SSE-KMS` — шифрование с использованием AWS Key Management Service.

`SSE-C` — шифрование с ключами, которые предоставляет пользователь.

**7. Как это выглядит на практике**

Представьте, что у вас есть веб-сайт, и вы хотите хранить изображения на S3. Вы создаёте бакет с именем `my-website-assets` и загружаете туда изображение `logo.png`.

- Бакет: `my-website-assets`

- Ключ: `images/logo.png`

- Доступ: открыт для всех (чтобы сайт мог показывать картинку)

- Класс хранения: `S3 Standard` (так как изображение часто используется)

- Шифрование: `SSE-S3`

Теперь любой пользователь может увидеть логотип, загруженный с S3, но не сможет изменить или удалить его.

В итоге структура хранения данных в Amazon S3 проста и логична:

- Бакеты — контейнеры для хранения.

- Объекты — файлы с метаданными.

- Ключи — уникальные имена для объектов.

- Метаданные — информация о файлах.

- Классы хранения — для оптимизации стоимости и доступности.
- 
Для взаимодействия с объектами в Amazon S3 используются такие сетевые технологии, как `REST` и `SOAP`. Все операции выполняются с помощью сетевых запросов, что и объясняет модель оплаты за использование сервиса — каждый запрос потребляет ресурсы, за что и взимается плата.

В основе работы S3 лежат пять ключевых операций, которые позволяют гибко управлять данными. Во-первых, необходимо создать бакет — специальное пространство для хранения объектов. Далее можно загрузить объект в бакет, присвоив ему уникальный ключ, который будет использоваться для доступа к этому файлу. При необходимости данные можно легко считать, скачав объект с помощью стандартного HTTP-запроса или даже через BitTorrent, что особенно удобно для передачи больших файлов. Если объект больше не нужен, его можно удалить, освободив место в хранилище. А чтобы получить представление о содержимом бакета, доступна операция по выводу списка всех ключей — своего рода просмотр структуры хранения.

Эти базовые операции создают простую и понятную модель работы с данными, где каждый объект легко создать, найти, скачать или удалить.


