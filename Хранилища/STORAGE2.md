# Архитектура DWH

Корпоративное хранилище данных состоит из нескольких взаимосвязанных уровней, каждый из которых выполняет свою функцию.

**1. Источники данных**

Сюда стекается информация из десятков систем: транзакции из банковских приложений, заказы из интернет‑магазинов, показатели с производственных датчиков, логи веб‑серверов.

**2. ETL‑процессы**

Обеспечивают движение данных от источников к хранилищу. 

На этапе извлечения система забирает данные из источников, стараясь минимально нагружать рабочие системы. 

Преобразование — самый сложный этап: данные очищаются от ошибок, приводятся к единому формату, обогащаются дополнительной информацией. 

На этапе загрузки готовые данные помещаются в хранилище.

**3. Ядро хранилища**

Здесь данные хранятся в структурированном виде, готовые к анализу. 

Современные DWH часто строятся на MPP‑системах вроде Greenplum, которые распределяют данные и вычисления между множеством серверов. Это позволяет обрабатывать терабайты информации за приемлемое время.

**4. Витрины данных**

Специализированные подмножества данных для конкретных задач. Если всё хранилище — это склад, то витрины — это полки с товарами, подобранными для определённых покупателей. 
Маркетинг получает витрину с данными о клиентах и продажах, финансисты — с доходами и расходами, логисты — с информацией о поставках и т. д. 
Витрины строятся на быстрых аналитических СУБД типа ClickHouse.

**5. Сервисный уровень**

Обеспечивает бесперебойную работу всей системы. 
Мониторинг отслеживает производительность и доступность данных, система управления доступом контролирует, кто может видеть конфиденциальную информацию, аудит фиксирует все действия пользователей.

**6. Уровень доступа и аналитики**

Здесь бизнес‑пользователи работают с данными через привычные инструменты. BI‑системы вроде Yandex DataLens, Superset превращают сложные запросы в интерактивные дашборды. 
Аналитики строят отчёты без необходимости писать код.

Такая многоуровневая архитектура обеспечивает гибкость и масштабируемость хранилища. Теперь разберёмся, как данные организованы внутри DWH.

<img width="1557" height="790" alt="image" src="https://github.com/user-attachments/assets/d79000bb-2510-4df4-96b4-e8b398927786" />

Архитектура корпоративного хранилища данных построена по принципу многоуровневой обработки и интеграции данных из разнородных источников. 

На входе системы находятся различные источники: транзакционные базы данных MySQL и PostgreSQL с поддержкой CDC (Change Data Capture, захват изменений данных), 
корпоративные системы через JDBC/ODBC‑коннекторы, веб‑сервисы через API с форматами JSON/XML/Protobuf, 
файловые хранилища Object Storage и HDFS с данными в форматах JSON/CSV/Parquet, а также потоковые источники через Kafka и Sockets. 

Данные проходят через слой ETL‑обработки, где Yandex Data Transfer обеспечивает репликацию и миграцию, а Yandex Data Processing на базе Apache Spark выполняет трансформацию и обогащение. 

Очереди и потоки данных, управляемые через Yandex Managed Service for Apache Kafka, обеспечивают надёжную доставку и буферизацию. 

Центральное аналитическое хранилище формируется на базе трёх компонентов: 

Yandex Managed Service for Greenplum как основная MPP‑система для структурированных данных, 

Object Storage — для хранения сырых данных и файлов, 

Yandex Data Processing (Apache Hadoop) — для обработки больших объёмов неструктурированных данных. 

Витрины данных создаются в Yandex Managed Service for ClickHouse для обеспечения быстрого доступа к предагрегированным данным. 

На верхнем уровне архитектуры находятся инструменты доступа: DataLens для визуализации и аналитики, 
API для программного взаимодействия, интерфейсы для бизнес‑пользователей и дата‑инженеров, обеспечивающие работу с данными в соответствии с их ролями и задачами.





