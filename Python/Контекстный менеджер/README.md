# **Контекстный менеджер** 

**Контекстный менеджер** - в Python используется для управления ресурсами, которые требуют инициализации и очистки (например, файлы, сетевые соединения, блокировки и т.д.). 

Основной механизм для создания контекстных менеджеров — это использование конструкции `with`, которая автоматически закрывает ресурсы после завершения блока кода.

**Как реализовать свой контекстный менеджер?**

Чтобы создать свой контекстный менеджер в Python, необходимо определить класс, который содержит методы `__enter__()` и `__exit__()`.

Метод `__enter__()` выполняется перед выполнением блока кода внутри оператора `with`. Он может выполнять какие-либо подготовительные действия или возвращать значение, которое будет связано с переменной после ключевого слова `as`.

Метод `__exit__()` вызывается после завершения выполнения блока кода `with`. Он используется для выполнения завершающих действий, таких как освобождение ресурсов, обработка исключений или выполнение финализирующих операций.

Вот пример простого контекстного менеджера, который записывает время выполнения блока кода:

Контекстные менеджеры помогают избежать ошибок, связанных с несвоевременным освобождением ресурсов, и делают код более чистым и читаемым.

```
class MyContextManager:
    def __enter__(self):
        print("Entering the context")
        return self  # Возвращаем объект для использования в блоке with

    def __exit__(self, exc_type, exc_value, traceback):
        print("Exiting the context")
        # Здесь можно обработать исключения, если нужно
        return False  # Возвращаем False, чтобы исключения не подавлялись
```

Вызываем:

```
with MyContextManager() as cm:
    print("Inside the context")
```

Результат:

```
Entering the context
Inside the context
Exiting the context
```
