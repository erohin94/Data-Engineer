# **dbAPI**

**dbAPI (Database API)** — это стандартный интерфейс, предназначенный для работы с базами данных в языке Python. 
Он обеспечивает универсальный подход к взаимодействию с различными СУБД (системами управления базами данных), скрывая различия между ними.

Ключевые компоненты DBAPI:

dbAPI описывает несколько объектов и методов, которые являются частью взаимодействия с базами данных:

**Connection** — объект для установления и управления соединением с базой данных.

Метод `connect()` — для установления соединения с базой данных.

Атрибуты:

`autocommit` — включает или выключает автоматическое подтверждение транзакций.

`commit()` — подтверждение изменений в базе данных.

`rollback()` — откат транзакций.

**Cursor** — объект для выполнения SQL-запросов, извлечения данных и управления результатами запросов.

Метод `cursor()` — создаёт объект курсора для выполнения запросов.

Основные методы курсора:

`execute(query, parameters)` — выполнение SQL-запроса с параметрами.

`fetchall()` — извлечение всех строк результата запроса.

`fetchone()` — извлечение одной строки результата.

`fetchmany(size)` — извлечение нескольких строк.

**Exceptions** — стандартные классы исключений для обработки ошибок, связанных с базой данных.

Исключения, поддерживаемые dbAPI:

`DatabaseError` — общая ошибка базы данных.

`IntegrityError` — ошибка, связанная с нарушением целостности данных.

`OperationalError` — ошибка, возникающая при проблемах с подключением или запросами.

`ProgrammingError` — ошибка, связанная с синтаксисом SQL-запроса.

**Transactions** — стандартный способ управления транзакциями, поддержка коммитов (commit) и откатов (rollback).

Пример использования DBAPI с SQLite:

```
import sqlite3

# Установление соединения с базой данных
connection = sqlite3.connect('example.db')

# Создание курсора для выполнения запросов
cursor = connection.cursor()

# Выполнение SQL-запроса
cursor.execute('SELECT * FROM employees')

# Извлечение всех строк результата
results = cursor.fetchall()

# Закрытие соединения с базой данных
connection.close()
```

# Тема блока: `Impala.dbapi`

## Содержание

 - [Описание Impala.dbapi](#title)
 - [Подключение dbapi.connect](#title2)
 - [cursor](#cursor)
 - [Примеры](#Примеры)
 - [Задачи](#Задачи)

### <a id="title">Описание Impala.dbapi<a/>
```Impala.dbapi``` представляет собой библиотеку для подключения и взаимодействия с Apache Impala (ранее известной как Cloudera Impala) с использованием Python. Apache Impala является распределенной системой аналитической обработки данных, предназначенной для выполнения SQL-запросов в режиме реального времени на больших объемах данных.

```Impala.dbapi``` обеспечивает простой и удобный способ подключиться и взаимодействовать с Impala из Python. Он реализует стандартный интерфейс Python DB-API 2.0, что позволяет использовать знакомые методы и синтаксис при работе с данными.

Вы сможете импортировать ```impala.dbapi``` и создать подключение к ```Impala```. Вот пример кода:

```python
import impala.dbapi as dbapi

# Создание подключения к Impala
conn = dbapi.connect(host='имя_хоста', port=имя_порта, database='имя_базы_данных')

# Создание курсора
cursor = conn.cursor()

# Выполнение SQL-запроса
cursor.execute('SELECT * FROM имя_таблицы')

# Получение результатов
results = cursor.fetchall()

# Вывод результатов
for row in results:
print(row)

# Закрытие курсора и соединения
cursor.close()
conn.close()
```

В этом примере мы создаем подключение к Impala, создаем курсор, выполняем SQL-запрос на выборку данных из таблицы и выводим результаты. По завершении работы следует закрыть курсор и соединение для корректного освобождения ресурсов.

```Impala.dbapi``` также поддерживает параметризованные запросы, аутентификацию Kerberos и другие функции, которые можно использовать для более продвинутой работы с Impala.

В целом, ```impala.dbapi``` предоставляет удобный способ взаимодействия с Impala из Python, позволяя выполнять SQL-запросы и обрабатывать полученные результаты.
