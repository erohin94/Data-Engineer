# **Типы физического соединения таблиц**

Зачем вообще знать, как работает физическое соединение таблиц. Все дело в том, что если у нас достаточно много задач, связанных с оптимизацией, то понимание внутренних процессов, понимание того, как работает тот или иной оператор в плане выполнения запроса, поможет нам в случае необходимости скорректировать запрос и сделать его более эффективным.

Кроме этого, на собеседованиях на позиции, которые связаны с разработкой, очень часто любят спрашивать, как работает физическое соединение таблиц, наверное в 95% случаях спросят про физическое соединение таблиц Nested Loops, Merge и Hash.

Поэтому знание и понимание того, как фактически происходит соединение данных в, очень полезно.


## **Nested Loops Join**

Nested Loops – это оператор вложенных циклов, который отражает тип физического соединения данных.

Принцип работы Nested Loops следующий: SQL Server для каждого значения одного набора данных (обычно, где меньше записей), ищет соответствующее значение в другом наборе данных.

Иными словами, берем первое значение из первой таблицы (она называется внешней) и сравниваем его последовательно со всеми значениями во второй таблице (она называется внутренней), если находит соответствие, то запись включается в итоговый набор данных. Когда значение из первого набора данных сравнилось со всеми знамениями из второго набора, то берётся второе значение первого набора и снова происходит сравнение со всеми значениями из второго набора и так происходит до тех пор, пока каждое значение из первой таблицы, т.е. внешней, не будет сравнено с каждым значением из второй таблицы, т.е. внутренней.

Таким образом, у нас два цикла, внешний и внутренний, отсюда и название – вложенные циклы.

![Types_of_table_joins_in_sql_server_3](https://github.com/user-attachments/assets/fc208864-15c2-484f-85fd-5745e37e11ef)

